# Cotion 테스트 가이드

이 문서는 Cotion의 주요 기능을 수동으로 테스트하는 방법을 설명합니다.

## 개발 환경 준비

### 1. 서버 실행

```bash
# 루트 디렉토리에서
npm install
npm run dev
```

서버가 정상적으로 시작되면:
- 🌐 Frontend: http://localhost:5173
- 🔌 Backend API: http://localhost:3000
- 🔄 WebSocket: ws://localhost:3000/collaboration

## 테스트 시나리오

### 1. 인증 시스템 테스트

#### 회원가입
1. http://localhost:5173/signup 접속
2. 이름, 이메일, 비밀번호(8자 이상) 입력
3. "회원가입" 버튼 클릭
4. ✅ "회원가입이 완료되었습니다" 토스트 알림 확인
5. ✅ 자동으로 홈페이지로 리다이렉트 확인

#### 로그아웃
1. 좌측 사이드바 하단 "로그아웃" 버튼 클릭
2. ✅ 로그인 페이지로 리다이렉트 확인

#### 로그인
1. http://localhost:5173/login 접속
2. 이메일과 비밀번호 입력
3. "로그인" 버튼 클릭
4. ✅ "로그인되었습니다" 토스트 알림 확인
5. ✅ 홈페이지로 리다이렉트 확인

#### 에러 처리
1. 잘못된 비밀번호로 로그인 시도
2. ✅ 에러 메시지 표시 확인
3. ✅ 빨간색 Alert 컴포넌트 표시 확인

### 2. 페이지 관리 테스트

#### 페이지 생성
1. 좌측 사이드바에서 "+" 버튼 클릭
2. 이모지 선택기에서 아이콘 선택 (예: 📄)
3. 페이지 제목 입력 (예: "회의록")
4. "만들기" 버튼 클릭
5. ✅ "페이지가 생성되었습니다" 토스트 알림 확인
6. ✅ 좌측 트리에 새 페이지 표시 확인
7. ✅ 선택한 이모지가 페이지 옆에 표시 확인

#### 하위 페이지 생성
1. 기존 페이지 옆 "+" 버튼 클릭
2. 제목 입력 (예: "2024년 1월 회의록")
3. "만들기" 버튼 클릭
4. ✅ 부모 페이지 아래에 중첩되어 표시 확인
5. ✅ 들여쓰기로 계층 구조 확인

#### 페이지 확장/축소
1. 하위 페이지가 있는 페이지의 화살표 아이콘 클릭
2. ✅ 하위 페이지 표시/숨김 토글 확인

#### 페이지 선택
1. 트리에서 페이지 클릭
2. ✅ 페이지 제목이 헤더에 표시 확인
3. ✅ 에디터 영역에 페이지 내용 표시 확인
4. ✅ 선택된 페이지 하이라이트 확인

### 3. 에디터 기능 테스트

#### 기본 텍스트 입력
1. 페이지 선택 후 에디터에 텍스트 입력
2. Cmd/Ctrl + S 눌러 저장
3. ✅ "저장되었습니다" 토스트 알림 확인 (1.5초 후 사라짐)

#### 포맷팅 도구
1. 텍스트 입력 후 선택
2. 툴바에서 다양한 포맷 버튼 테스트:
   - **굵게** (Cmd+B)
   - *기울임* (Cmd+I)
   - ~~취소선~~
   - `인라인 코드`
   - 제목 1/2/3
   - 글머리 목록
   - 번호 목록
   - 인용구
3. ✅ 각 포맷이 올바르게 적용되는지 확인
4. ✅ 실행 취소/다시 실행 작동 확인

#### 자동 저장
1. 텍스트 입력 후 그냥 대기
2. 페이지 새로고침 (F5)
3. 같은 페이지 다시 선택
4. ✅ 변경사항이 자동으로 저장되었는지 확인

### 4. 실시간 협업 테스트

#### 준비
1. 브라우저 A: 일반 모드에서 http://localhost:5173 로그인
2. 브라우저 B: 시크릿 모드로 다른 계정으로 로그인
3. 두 브라우저 모두 같은 페이지 선택

#### 동시 편집
1. 브라우저 A에서 텍스트 입력
2. ✅ 브라우저 B에 즉시 텍스트 표시 확인
3. 브라우저 B에서 다른 위치에 텍스트 입력
4. ✅ 브라우저 A에 즉시 텍스트 표시 확인
5. ✅ 충돌 없이 병합되는지 확인

#### 협업 커서
1. 브라우저 A에서 커서 이동
2. ✅ 브라우저 B에 다른 색상의 커서 표시 확인
3. ✅ 사용자 이름이 커서 옆에 표시 확인

#### 활성 사용자 표시
1. 에디터 툴바 왼쪽 상단 확인
2. ✅ 녹색 점 (연결됨) 확인
3. ✅ 사용자 아이콘 + 숫자 (현재 접속자 수) 확인
4. 브라우저 B 닫기
5. ✅ 브라우저 A의 활성 사용자 수 감소 확인

#### 연결 상태
1. 브라우저 개발자 도구 → Network 탭 열기
2. WebSocket 연결 확인
3. ✅ `ws://localhost:3000/collaboration` 연결 확인
4. ✅ 연결 상태: 101 Switching Protocols 확인

### 5. UI/UX 기능 테스트

#### Toast 알림
다양한 액션 후 토스트 알림 확인:
- ✅ 로그인: "로그인되었습니다" (초록색)
- ✅ 페이지 생성: "페이지가 생성되었습니다" (초록색)
- ✅ 저장: "저장되었습니다" (초록색)
- ✅ 에러 발생: 에러 메시지 (빨간색)
- ✅ 3초 후 자동 사라짐 확인
- ✅ X 버튼으로 수동 닫기 가능 확인

#### 이모지 선택기
1. 새 페이지 만들기 모달에서 이모지 버튼 클릭
2. ✅ 이모지 팝업 표시 확인
3. ✅ 카테고리별 이모지 그룹 확인
4. 이모지 선택
5. ✅ 선택한 이모지가 버튼에 표시 확인
6. "아이콘 제거" 버튼 클릭
7. ✅ 이모지 제거 확인

#### 로딩 상태
1. 회원가입 폼에서 제출 버튼 클릭
2. ✅ 버튼에 스피너 애니메이션 표시 확인
3. ✅ "회원가입" → 버튼 비활성화 확인
4. 페이지 목록 로딩 시
5. ✅ "로딩 중..." 메시지 표시 확인

#### 모달
1. ESC 키 눌러 모달 닫기
2. ✅ 모달이 닫히는지 확인
3. 모달 바깥(백드롭) 클릭
4. ✅ 모달이 닫히는지 확인
5. 모달 내부 클릭
6. ✅ 모달이 유지되는지 확인

#### 반응형 디자인
1. 브라우저 크기 조절
2. ✅ 사이드바 토글 버튼 표시 확인 (작은 화면)
3. ✅ 레이아웃이 깨지지 않는지 확인

### 6. 에러 처리 테스트

#### 네트워크 에러
1. 백엔드 서버 중지
2. 페이지 생성 시도
3. ✅ "페이지 생성에 실패했습니다" 에러 토스트 확인
4. ✅ 콘솔에 에러 로그 출력 확인

#### 입력 검증
1. 회원가입 시 비밀번호 7자 입력
2. ✅ "비밀번호는 최소 8자 이상이어야 합니다" 에러 확인
3. 빈 페이지 제목으로 생성 시도
4. ✅ "만들기" 버튼 비활성화 확인

## 성능 테스트

### 동시 사용자 테스트
1. 5개 이상의 브라우저 탭 열기
2. 모두 같은 페이지 접속
3. 동시에 다른 위치에서 편집
4. ✅ 모든 변경사항이 실시간으로 동기화되는지 확인
5. ✅ 지연 없이 부드럽게 작동하는지 확인

### 대용량 문서 테스트
1. 긴 문서 작성 (2000+ 단어)
2. ✅ 에디터 성능 저하 없는지 확인
3. ✅ 저장 시간 확인 (2초 이내)

## 브라우저 호환성

최소 테스트 대상:
- [ ] Chrome/Edge (최신 버전)
- [ ] Firefox (최신 버전)
- [ ] Safari (macOS, 최신 버전)

## 데이터베이스 확인

```bash
# PostgreSQL 접속
psql cotion_dev

# 사용자 목록 확인
SELECT id, email, name FROM users;

# 페이지 계층 구조 확인
SELECT id, title, icon, path FROM pages ORDER BY path;

# 세션 확인
SELECT user_id, expires_at FROM sessions WHERE expires_at > NOW();
```

## 문제 발생 시

### 로그 확인
- Frontend: 브라우저 콘솔 (F12)
- Backend: 터미널 출력

### 흔한 문제
1. **WebSocket 연결 실패**
   - 백엔드 서버 실행 확인
   - 포트 3000 사용 중 확인

2. **데이터베이스 연결 실패**
   - PostgreSQL 실행 확인: `pg_isready`
   - DATABASE_URL 확인

3. **페이지 로딩 안 됨**
   - 네트워크 탭에서 API 응답 확인
   - 인증 토큰 유효성 확인

---

모든 테스트 항목을 통과하면 프로덕션 배포 준비가 완료됩니다!
